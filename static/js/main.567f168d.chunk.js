(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),o=a.n(i),l=a(10),c=a(8),s=a(6),u="FILTER_CHANGED",p="INPUT_CHANGED";var v={currentFilter:"popular",inputValue:""};var m="SHOW_DETAILS",d="HIDE_DETAILS";var h={title:"",id:0,imagePath:"",overview:"",popularity:0,releaseDate:"",details:!1};var f="GET_MOVIES_REQUEST",g="GET_MOVIES_SUCCESS",y="GET_MOVIES_FAILURE";function b(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n){n({type:f});var r=function(e,t,a){var n="https://api.themoviedb.org/3",r="1fafe97d2ee12ba14e11814dc5afeaa2",i="en-US";return a?"".concat(n,"/search/movie?api_key=").concat(r,"&page=").concat(t,"&query=").concat(a):"".concat(n,"/movie/").concat(e,"?api_key=").concat(r,"&language=").concat(i,"&page=").concat(t,"&region=UA")}(e,t,a);console.log(r),function(e){return function(t){fetch(e,{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.results;a.length>0&&t({type:g,payload:a})}).catch(function(e){var a=e.message;t({type:y,payload:a}),console.log(a)})}}(r)(n)}}var O={moviesArray:[],isFetching:!1,error:"",page:1};var E=Object(c.combineReducers)({filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(s.a)({},e,{currentFilter:t.payload});case p:return Object(s.a)({},e,{inputValue:t.payload});default:return e}},movie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(s.a)({},e,{details:!0,title:t.payload.title,overview:t.payload.overview,imagePath:t.payload.imagePath,popularity:t.payload.popularity,releaseDate:t.payload.releaseDate});case d:return Object(s.a)({},e,{details:!1});default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(s.a)({},e,{isFetching:!0,page:e.page+1});case g:return Object(s.a)({},e,{isFetching:!1,moviesArray:e.moviesArray.concat(t.payload)});case y:return Object(s.a)({},e,{isFetching:!1,error:t.payload,page:e.page-1});default:return e}}}),j=a(18),_=a(19),w=Object(c.createStore)(E,Object(_.composeWithDevTools)(Object(c.applyMiddleware)(j.a))),C=(a(29),a(1)),k=a(2),D=a(4),N=a(3),A=a(5),S=(a(30),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).onClickHandler=function(e){e.preventDefault();var t=a.props,n=t.getMovies,r=t.filterChange,i=t.movies,o=e.currentTarget.innerText.toLowerCase();r(o);var l=i.moviesArray.length;i.moviesArray.splice(0,l),i.page=1,n(o,i.page)},a}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"filter__list"},r.a.createElement("li",{className:"filter__item",onClick:this.onClickHandler},"Popular"),r.a.createElement("li",{className:"filter__item",onClick:this.onClickHandler},"Now_playing"),r.a.createElement("li",{className:"filter__item",onClick:this.onClickHandler},"Top_rated"))}}]),t}(n.Component)),M=(a(31),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).onBtnClickHandler=function(e){e.preventDefault();var t=a.props,n=t.getMovies,r=t.movies,i=t.filter,o=i.inputValue.toString(),l=r.moviesArray.length;r.moviesArray.splice(0,l),r.page=1,n(i.currentFilter,r.page,o)},a.onChangeHandler=function(e){e.preventDefault();var t=e.target.value;(0,a.props.inputChange)(t)},a}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"filter__form"},r.a.createElement("form",{onSubmit:this.onBtnClickHandler},r.a.createElement("div",{className:"filter__input"},r.a.createElement("input",{type:"text",onChange:this.onChangeHandler,placeholder:"Search for movies..."})),r.a.createElement("div",{className:"filter__submit"},r.a.createElement("button",{type:"submit"},"Search"))))}}]),t}(n.Component)),F=(a(32),function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filterChange,a=e.getMovies,n=e.movies,i=e.inputChange,o=e.filter;return r.a.createElement("div",{className:"filter__wrapper"},r.a.createElement(S,{movies:n,getMovies:a,filterChange:t}),r.a.createElement(M,{movies:n,getMovies:a,inputChange:i,filter:o}))}}]),t}(n.Component)),H=Object(l.b)(function(e){return{filter:e.filter,movies:e.movies}},function(e){return{filterChange:function(t){return e(function(e){return function(t){t({type:u,payload:e})}}(t))},getMovies:function(t,a,n){return e(b(t,a,n))},inputChange:function(t){return e(function(e){return function(t){t({type:p,payload:e})}}(t))}}})(F),T=(a(33),{imgUrl:"https://image.tmdb.org/t/p/w300/"}),I=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).onClickHandler=function(){var e=a.props,t=e.title,n=e.overview,r=e.imagePath,i=e.popularity,o=e.releaseDate,l=T.imgUrl+r;a.props.showDetails(t,n,l,i,o)},a}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.imagePath,n=e.popularity,i=void 0!==a?a:"kqjL17yufvn9OVLyXYpvtyrFfak.jpg";return i=T.imgUrl+i,r.a.createElement("div",{className:"img",id:t,style:{backgroundImage:"url(".concat(i,")")},onClick:this.onClickHandler},r.a.createElement("span",{className:"popularity"},n.toFixed(1)))}}]),t}(n.Component),P=(a(34),function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.overview,n=e.imagePath,i=e.popularity,o=e.hideDetails,l=e.releaseDate;return r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"details__poster",style:{backgroundImage:"url(".concat(n,")")}}),r.a.createElement("div",{className:"details__sidebar"},r.a.createElement("h3",{className:"details__title"},t),r.a.createElement("p",{className:"details__overview"},a),r.a.createElement("p",{className:"details__release-date"},"Release date: ",l.substr(0,4)),r.a.createElement("span",{className:"details__popularity"},i.toFixed(1))),r.a.createElement("div",{className:"close",onClick:o}))}}]),t}(n.Component)),U=(a(35),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).handleOnScroll=function(){var e=a.props,t=e.filter,n=e.movies,r=e.getMovies;document.documentElement.getBoundingClientRect().bottom<document.documentElement.clientHeight+50&&(1===n.page&&r(t.currentFilter,++n.page,t.inputValue),r(t.currentFilter,n.page,t.inputValue))},a}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentWillMount",value:function(){(0,this.props.getMovies)(this.props.filter.currentFilter,this.props.movies.page)}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleOnScroll)}},{key:"render",value:function(){var e=this.props.movies.moviesArray,t=this.props,a=t.showDetails,n=t.hideDetails,i=t.movie,o=e.map(function(e){var t=e.id,o=e.title,l=e.overview,c=e.poster_path,s=e.vote_average,u=e.release_date;return r.a.createElement(I,{key:t,id:t,imagePath:c,overview:l,popularity:s,title:o,showDetails:a,hideDetails:n,details:i.details,releaseDate:u})});return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"movies-list"},o),r.a.createElement("div",{className:"popup",style:this.props.movie.details?{display:"flex"}:{display:"none"}},r.a.createElement(P,{title:i.title,overview:i.overview,popularity:i.popularity,imagePath:i.imagePath,hideDetails:n,releaseDate:i.releaseDate})))}}]),t}(n.Component)),V=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.movies,a=e.getMovies,n=e.filter,i=e.showDetails,o=e.hideDetails,l=e.movie;return r.a.createElement(U,{movies:t,getMovies:a,filter:n,movie:l,showDetails:i,hideDetails:o})}}]),t}(n.Component),L=Object(l.b)(function(e){return{movies:e.movies,filter:e.filter,movie:e.movie}},function(e){return{getMovies:function(t,a,n){return e(b(t,a,n))},showDetails:function(t,a,n,r,i){return e(function(e,t,a,n,r){return function(i){i({type:m,payload:{title:e,overview:t,imagePath:a,popularity:n,releaseDate:r}})}}(t,a,n,r,i))},hideDetails:function(){return e(function(e){e({type:d})})}}})(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(l.a,{store:w},r.a.createElement(H,null),r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.567f168d.chunk.js.map